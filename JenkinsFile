pipeline {
    agent any

    stages {
        stage('Building'){
        	steps{
        		sh 'pwd'
        		sh 'chmod 777 build.sh'
        		sh 'ls -alrt'
        		sh './build.sh'
        	}       	
        }
        stage('Ansible Playbook Lauch'){
            ansiblePlaybook(
                inventory: '$WORKSPACE/jenkins_integration/inventory.ini'
                limit: '${HOSTS}'
                playbook: ${WORKSPACE}jenkins_integration/site.yml
                colorized:true
            )
        }
        stage('Artifacts '){
        	steps{ 
        		archiveArtifacts artifacts: 'build/src/serialize'
        	}       	
        }
    }
}
